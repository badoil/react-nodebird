{"ast":null,"code":"var __jsx = React.createElement;\nimport React, { useState, useCallback, useEffect } from 'react';\nimport { Checkbox, Input, Button } from 'antd';\nimport { useDispatch, useSelector } from 'react-redux';\nimport Router from 'next/router';\nimport styled from 'styled-components';\nimport { SIGN_UP_REQUEST } from '../reducers/user';\nconst SignupError = styled.div`\n    color: red\n`;\nexport const useInput = (initValue = null) => {\n  const {\n    0: value,\n    1: setter\n  } = useState(initValue);\n  const handler = useCallback(e => {\n    setter(e.target.value);\n  }, []);\n  return [value, handler];\n};\n\nconst Signup = () => {\n  const {\n    0: passwordCheck,\n    1: setPasswordCheck\n  } = useState('');\n  const {\n    0: term,\n    1: setTerm\n  } = useState(false);\n  const {\n    0: passwordCheckError,\n    1: setPasswordCheckError\n  } = useState(false);\n  const {\n    0: termError,\n    1: setTermError\n  } = useState(false);\n  const [id, onChangeId] = useInput('');\n  const [nick, onChangeNick] = useInput('');\n  const [password, onChangePassword] = useInput('');\n  const {\n    isSigningUp,\n    me,\n    isSignedUp\n  } = useSelector(state => state.user);\n  const dispatch = useDispatch();\n  useEffect(() => {\n    if (isSignedUp || me) {\n      alert('going to go to home due to login');\n      Router.push('/');\n    }\n  }, [isSignedUp, me]);\n  const onSubmit = useCallback(e => {\n    e.preventDefault();\n\n    if (password !== passwordCheck) {\n      return setPasswordCheckError(true);\n    }\n\n    if (!term) {\n      return setTermError(true);\n    }\n\n    dispatch({\n      type: SIGN_UP_REQUEST,\n      data: {\n        userId: id,\n        nickname: nick,\n        password\n      }\n    });\n  }, [id, nick, password, passwordCheck, term]);\n  const onChangePasswordCheck = useCallback(e => {\n    setPasswordCheckError(e.target.value !== password);\n    setPasswordCheck(e.target.value);\n  }, [password]);\n  const onChangeTerm = useCallback(e => {\n    setTermError(false);\n    setTerm(e.target.checked);\n  }, []);\n\n  if (me) {\n    return null;\n  }\n\n  return __jsx(React.Fragment, null, __jsx(\"form\", {\n    onSubmit: onSubmit,\n    style: {\n      padding: 10\n    }\n  }, __jsx(\"div\", null, __jsx(\"label\", {\n    htmlFor: \"user-id\"\n  }, \"id\"), __jsx(\"br\", null), __jsx(Input, {\n    name: \"user-id\",\n    value: id,\n    required: true,\n    onChange: onChangeId\n  })), __jsx(\"div\", null, __jsx(\"label\", {\n    htmlFor: \"user-nick\"\n  }, \"nickname\"), __jsx(\"br\", null), __jsx(Input, {\n    name: \"user-nick\",\n    value: nick,\n    required: true,\n    onChange: onChangeNick\n  })), __jsx(\"div\", null, __jsx(\"label\", {\n    htmlFor: \"user-password\"\n  }, \"password\"), __jsx(\"br\", null), __jsx(Input, {\n    name: \"user-password\",\n    value: password,\n    type: \"password\",\n    required: true,\n    onChange: onChangePassword\n  })), __jsx(\"div\", null, __jsx(\"label\", {\n    htmlFor: \"user-password-check\"\n  }, \"password-check\"), __jsx(\"br\", null), __jsx(Input, {\n    name: \"user-password-check\",\n    value: passwordCheck,\n    type: \"password\",\n    required: true,\n    onChange: onChangePasswordCheck\n  })), passwordCheckError && __jsx(SignupError, null, \"dismatch the password\"), __jsx(\"div\", null, __jsx(Checkbox, {\n    name: \"user-term\",\n    checked: term,\n    onChange: onChangeTerm\n  }, \"Are you sure??\")), termError && __jsx(SignupError, null, \"you should agree with the term\"), __jsx(\"div\", {\n    style: {\n      marginTop: 10\n    }\n  }, __jsx(Button, {\n    type: \"primary\",\n    htmlType: \"submit\",\n    loading: isSigningUp\n  }, \"Signup\"))));\n};\n\nexport default Signup;","map":{"version":3,"sources":["/Users/oil/Desktop/zerocho-react/nodebird/front/pages/signup.js"],"names":["React","useState","useCallback","useEffect","Checkbox","Input","Button","useDispatch","useSelector","Router","styled","SIGN_UP_REQUEST","SignupError","div","useInput","initValue","value","setter","handler","e","target","Signup","passwordCheck","setPasswordCheck","term","setTerm","passwordCheckError","setPasswordCheckError","termError","setTermError","id","onChangeId","nick","onChangeNick","password","onChangePassword","isSigningUp","me","isSignedUp","state","user","dispatch","alert","push","onSubmit","preventDefault","type","data","userId","nickname","onChangePasswordCheck","onChangeTerm","checked","padding","marginTop"],"mappings":"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","sourcesContent":["import React, { useState, useCallback, useEffect } from 'react';\nimport { Checkbox, Input, Button } from 'antd';\nimport { useDispatch, useSelector } from 'react-redux';\nimport Router from 'next/router';\nimport styled from 'styled-components';\n\nimport { SIGN_UP_REQUEST } from '../reducers/user';\n\nconst SignupError = styled.div`\n    color: red\n`\n\nexport const useInput = (initValue = null) => {\n    const [ value, setter ] = useState(initValue);\n    const handler = useCallback((e) => {\n        setter(e.target.value);\n    }, [])\n    return [ value, handler ]\n}\n\nconst Signup = () => {\n    const [ passwordCheck, setPasswordCheck ] = useState('');\n    const [ term, setTerm ] = useState(false);\n    const [ passwordCheckError, setPasswordCheckError ] = useState(false);\n    const [ termError, setTermError] = useState(false);\n\n    const [ id, onChangeId ] = useInput('');\n    const [ nick, onChangeNick ] = useInput('');\n    const [ password, onChangePassword ] = useInput('');\n\n    const { isSigningUp, me, isSignedUp } = useSelector(state => state.user);\n\n    const dispatch = useDispatch();\n\n    useEffect(() => {\n        if(isSignedUp || me){\n            alert('going to go to home due to login')\n            Router.push('/');\n        }\n    }, [ isSignedUp, me ])\n\n    const onSubmit = useCallback((e) => {\n        e.preventDefault();\n\n        if(password !== passwordCheck){\n            return setPasswordCheckError(true);\n        }\n        if(!term){\n            return setTermError(true);\n        }\n\n        dispatch({\n            type: SIGN_UP_REQUEST,\n            data: {\n                userId: id,\n                nickname: nick,\n                password\n            }});\n\n        \n    }, [ id, nick, password, passwordCheck, term])\n\n    const onChangePasswordCheck = useCallback((e) => {\n        setPasswordCheckError(e.target.value !== password);\n        setPasswordCheck(e.target.value);\n    }, [password])\n\n    const onChangeTerm = useCallback((e) => {\n        setTermError(false); \n        setTerm(e.target.checked);\n    }, [])\n\n    if(me){\n        return null;\n    }\n\n    return(\n        <>\n            <form onSubmit={onSubmit} style={{ padding: 10}} >\n                <div>\n                    <label htmlFor=\"user-id\" >id</label>\n                    <br />\n                    <Input name=\"user-id\" value={id} required onChange={onChangeId} />\n                </div>\n                <div>\n                    <label htmlFor=\"user-nick\" >nickname</label>\n                    <br />\n                    <Input name=\"user-nick\" value={nick} required onChange={onChangeNick} />\n                </div>\n                <div>\n                    <label htmlFor=\"user-password\">password</label>\n                    <br />\n                    <Input name=\"user-password\"  value={password} type=\"password\" required onChange={onChangePassword} />\n                </div>\n                <div>\n                    <label htmlFor=\"user-password-check\">password-check</label>\n                    <br />\n                    <Input name=\"user-password-check\" value={passwordCheck} type=\"password\" required onChange={onChangePasswordCheck} />\n                </div>\n                { passwordCheckError && <SignupError>dismatch the password</SignupError>}\n                <div>\n                    <Checkbox name=\"user-term\" checked={term} onChange={onChangeTerm} >Are you sure??</Checkbox>\n                </div>\n                { termError && <SignupError>you should agree with the term</SignupError>}\n                <div style={{ marginTop: 10 }} >\n                    <Button type=\"primary\" htmlType=\"submit\" loading={isSigningUp} >Signup</Button>\n                </div>\n            </form>\n        </>\n    )\n}\n\nexport default Signup;"]},"metadata":{},"sourceType":"module"}