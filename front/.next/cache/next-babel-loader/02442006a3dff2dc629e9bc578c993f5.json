{"ast":null,"code":"import { all, put, call, takeLatest, fork } from 'redux-saga/effects';\nimport axios from 'axios';\nimport { LOG_IN_REQUEST, LOG_IN_SUCCESS, LOG_IN_FAILURE, SIGN_UP_REQUEST, SIGN_UP_SUCCESS, SIGN_UP_FAILURE, LOG_OUT_REQUEST, LOG_OUT_SUCCESS, LOG_OUT_FAILURE, LOAD_USER_REQUEST, LOAD_USER_SUCCESS, LOAD_USER_FAILURE, FOLLOW_USER_REQUEST, FOLLOW_USER_SUCCESS, FOLLOW_USER_FAILURE, UNFOLLOW_USER_REQUEST, UNFOLLOW_USER_SUCCESS, UNFOLLOW_USER_FAILURE, LOAD_FOLLOWERS_REQUEST, LOAD_FOLLOWERS_SUCCESS, LOAD_FOLLOWERS_FAILURE, LOAD_FOLLOWINGS_REQUEST, LOAD_FOLLOWINGS_SUCCESS, LOAD_FOLLOWINGS_FAILURE, REMOVE_FOLLOWER_REQUEST, REMOVE_FOLLOWER_SUCCESS, REMOVE_FOLLOWER_FAILURE, EDIT_NICKNAME_REQUEST, EDIT_NICKNAME_SUCCESS, EDIT_NICKNAME_FAILURE } from '../reducers/user';\n\nfunction loginAPI(loginData) {\n  return axios.post('/user/login', loginData, {\n    withCredentials: true\n  });\n}\n\nfunction* login(action) {\n  try {\n    const result = yield call(loginAPI, action.data);\n    console.log('loginResult:', result);\n    yield put({\n      type: LOG_IN_SUCCESS,\n      data: result.data\n    });\n  } catch (err) {\n    console.error(err);\n    yield put({\n      type: LOG_IN_FAILURE\n    });\n  }\n}\n\nfunction* watchLogin() {\n  yield takeLatest(LOG_IN_REQUEST, login);\n}\n\nfunction signupAPI(signUpData) {\n  return axios.post('/user', signUpData);\n}\n\nfunction* signup(action) {\n  try {\n    yield call(signupAPI, action.data);\n    yield put({\n      type: SIGN_UP_SUCCESS\n    });\n  } catch (err) {\n    console.error(err);\n    yield put({\n      type: SIGN_UP_FAILURE,\n      error: err\n    });\n  }\n}\n\nfunction* watchSignup() {\n  yield takeLatest(SIGN_UP_REQUEST, signup);\n}\n\nfunction logoutAPI() {\n  return axios.post('/user/logout', {}, {\n    withCredentials: true\n  });\n}\n\nfunction* logout() {\n  try {\n    yield call(logoutAPI);\n    yield put({\n      type: LOG_OUT_SUCCESS\n    });\n  } catch (err) {\n    console.error(err);\n    yield put({\n      type: LOG_OUT_FAILURE,\n      error: err\n    });\n  }\n}\n\nfunction* watchLogout() {\n  yield takeLatest(LOG_OUT_REQUEST, logout);\n}\n\nfunction loadUserAPI(userId) {\n  return axios.get(userId ? `/user/${userId}` : `/user`, {\n    withCredentials: true\n  });\n}\n\nfunction* loadUser(action) {\n  try {\n    const result = yield call(loadUserAPI, action.data);\n    console.log('loadUser: ', result);\n    yield put({\n      type: LOAD_USER_SUCCESS,\n      data: result.data,\n      me: !action.data\n    });\n  } catch (err) {\n    console.error(err);\n    yield put({\n      type: LOAD_USER_FAILURE,\n      error: err\n    });\n  }\n}\n\nfunction* watchLoadUser() {\n  yield takeLatest(LOAD_USER_REQUEST, loadUser);\n}\n\nfunction followUserAPI(postUserId) {\n  return axios.post(`/user/${postUserId}/follow`, {}, {\n    withCredentials: true\n  });\n}\n\nfunction* followUser(action) {\n  try {\n    const result = yield call(followUserAPI, action.data);\n    console.log('followResult: ', result.data);\n    yield put({\n      type: FOLLOW_USER_SUCCESS,\n      data: result.data\n    });\n  } catch (e) {\n    console.error(e);\n    yield put({\n      type: FOLLOW_USER_FAILURE,\n      error: e\n    });\n  }\n}\n\nfunction* watchFollowUser() {\n  yield takeLatest(FOLLOW_USER_REQUEST, followUser);\n}\n\nfunction unfollowUserAPI(postUserId) {\n  return axios.delete(`/user/${postUserId}/follow`, {\n    withCredentials: true\n  });\n}\n\nfunction* unfollowUser(action) {\n  try {\n    const result = yield call(unfollowUserAPI, action.data);\n    console.log('unfollowResult: ', result);\n    yield put({\n      type: UNFOLLOW_USER_SUCCESS,\n      data: result.data\n    });\n  } catch (e) {\n    console.error(e), yield put({\n      type: UNFOLLOW_USER_FAILURE,\n      error: e\n    });\n  }\n}\n\nfunction* watchUnfollowUser() {\n  yield takeLatest(UNFOLLOW_USER_REQUEST, unfollowUser);\n}\n\nfunction loadFollowersAPI(userId, offset = 0, limit = 3) {\n  return axios.get(`/user/${userId || 0}/followers?offset=${offset}&limit=${limit}`, {\n    withCredentials: true\n  });\n}\n\nfunction* loadFollowers(action) {\n  try {\n    const result = yield call(loadFollowersAPI, action.data, action.offset);\n    yield put({\n      type: LOAD_FOLLOWERS_SUCCESS,\n      data: result.data\n    });\n  } catch (e) {\n    console.error(e);\n    yield put({\n      type: LOAD_FOLLOWERS_FAILURE,\n      error: e\n    });\n  }\n}\n\nfunction* watchLoadFollowers() {\n  yield takeLatest(LOAD_FOLLOWERS_REQUEST, loadFollowers);\n}\n\nfunction loadFollowingsAPI(userId, offset = 0, limit = 3) {\n  return axios.get(`/user/${userId || 0}/followings?offset=${offset}&limit=${limit}`, {\n    withCredentials: true\n  });\n}\n\nfunction* loadFollowings(action) {\n  try {\n    const result = yield call(loadFollowingsAPI, action.data, action.offset);\n    yield put({\n      type: LOAD_FOLLOWINGS_SUCCESS,\n      data: result.data\n    });\n  } catch (e) {\n    console.error(e), yield put({\n      type: LOAD_FOLLOWINGS_FAILURE,\n      error: e\n    });\n  }\n}\n\nfunction* watchLoadFollowings() {\n  yield takeLatest(LOAD_FOLLOWINGS_REQUEST, loadFollowings);\n}\n\nfunction removeFollowerAPI(userId) {\n  return axios.delete(`/user/${userId}/follower`, {\n    withCredentials: true\n  });\n}\n\nfunction* removeFollower(action) {\n  try {\n    const result = yield call(removeFollowerAPI, action.data);\n    yield put({\n      type: REMOVE_FOLLOWER_SUCCESS,\n      data: result.data\n    });\n  } catch (e) {\n    console.error(e), yield put({\n      type: REMOVE_FOLLOWER_FAILURE,\n      error: e\n    });\n  }\n}\n\nfunction* watchRemoveFollower() {\n  yield takeLatest(REMOVE_FOLLOWER_REQUEST, removeFollower);\n}\n\nfunction editNicknameAPI(nickname) {\n  return axios.patch(`/user/nickname`, {\n    nickname\n  }, {\n    withCredentials: true\n  });\n}\n\nfunction* editNickname(action) {\n  try {\n    const result = yield call(editNicknameAPI, action.data);\n    yield put({\n      type: EDIT_NICKNAME_SUCCESS,\n      data: result.data\n    });\n  } catch (e) {\n    console.error(e);\n    yield put({\n      type: EDIT_NICKNAME_FAILURE,\n      error: e\n    });\n  }\n}\n\nfunction* watchEditNickname() {\n  yield takeLatest(EDIT_NICKNAME_REQUEST, editNickname);\n}\n\nexport default function* userSaga() {\n  yield all([fork(watchLogin), fork(watchLogout), fork(watchSignup), fork(watchLoadUser), fork(watchFollowUser), fork(watchUnfollowUser), fork(watchLoadFollowers), fork(watchLoadFollowings), fork(watchRemoveFollower), fork(watchEditNickname)]);\n}","map":{"version":3,"sources":["/Users/oil/Desktop/zerocho-react/nodebird/front/sagas/user.js"],"names":["all","put","call","takeLatest","fork","axios","LOG_IN_REQUEST","LOG_IN_SUCCESS","LOG_IN_FAILURE","SIGN_UP_REQUEST","SIGN_UP_SUCCESS","SIGN_UP_FAILURE","LOG_OUT_REQUEST","LOG_OUT_SUCCESS","LOG_OUT_FAILURE","LOAD_USER_REQUEST","LOAD_USER_SUCCESS","LOAD_USER_FAILURE","FOLLOW_USER_REQUEST","FOLLOW_USER_SUCCESS","FOLLOW_USER_FAILURE","UNFOLLOW_USER_REQUEST","UNFOLLOW_USER_SUCCESS","UNFOLLOW_USER_FAILURE","LOAD_FOLLOWERS_REQUEST","LOAD_FOLLOWERS_SUCCESS","LOAD_FOLLOWERS_FAILURE","LOAD_FOLLOWINGS_REQUEST","LOAD_FOLLOWINGS_SUCCESS","LOAD_FOLLOWINGS_FAILURE","REMOVE_FOLLOWER_REQUEST","REMOVE_FOLLOWER_SUCCESS","REMOVE_FOLLOWER_FAILURE","EDIT_NICKNAME_REQUEST","EDIT_NICKNAME_SUCCESS","EDIT_NICKNAME_FAILURE","loginAPI","loginData","post","withCredentials","login","action","result","data","console","log","type","err","error","watchLogin","signupAPI","signUpData","signup","watchSignup","logoutAPI","logout","watchLogout","loadUserAPI","userId","get","loadUser","me","watchLoadUser","followUserAPI","postUserId","followUser","e","watchFollowUser","unfollowUserAPI","delete","unfollowUser","watchUnfollowUser","loadFollowersAPI","offset","limit","loadFollowers","watchLoadFollowers","loadFollowingsAPI","loadFollowings","watchLoadFollowings","removeFollowerAPI","removeFollower","watchRemoveFollower","editNicknameAPI","nickname","patch","editNickname","watchEditNickname","userSaga"],"mappings":"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","sourcesContent":["import { all, put, call, takeLatest, fork } from 'redux-saga/effects';\nimport axios from 'axios'\nimport { LOG_IN_REQUEST, LOG_IN_SUCCESS, LOG_IN_FAILURE, \n        SIGN_UP_REQUEST, SIGN_UP_SUCCESS, SIGN_UP_FAILURE, \n        LOG_OUT_REQUEST, LOG_OUT_SUCCESS, LOG_OUT_FAILURE,\n        LOAD_USER_REQUEST, LOAD_USER_SUCCESS, LOAD_USER_FAILURE, \n        FOLLOW_USER_REQUEST, FOLLOW_USER_SUCCESS, FOLLOW_USER_FAILURE, \n        UNFOLLOW_USER_REQUEST, UNFOLLOW_USER_SUCCESS, UNFOLLOW_USER_FAILURE, \n        LOAD_FOLLOWERS_REQUEST, LOAD_FOLLOWERS_SUCCESS, LOAD_FOLLOWERS_FAILURE, \n        LOAD_FOLLOWINGS_REQUEST, LOAD_FOLLOWINGS_SUCCESS, LOAD_FOLLOWINGS_FAILURE, \n        REMOVE_FOLLOWER_REQUEST, REMOVE_FOLLOWER_SUCCESS, REMOVE_FOLLOWER_FAILURE, \n        EDIT_NICKNAME_REQUEST, EDIT_NICKNAME_SUCCESS, EDIT_NICKNAME_FAILURE } from '../reducers/user';\n\n\nfunction loginAPI(loginData) {\n    return axios.post('/user/login', loginData, {\n        withCredentials: true,\n    });\n}\n\nfunction* login(action){\n    try{\n        const result = yield call(loginAPI, action.data);\n        console.log('loginResult:', result);\n        yield put({\n            type: LOG_IN_SUCCESS,\n            data: result.data,\n        })\n    }catch(err){\n        console.error(err)\n        yield put({\n            type: LOG_IN_FAILURE,\n        })\n    }\n}\n\nfunction* watchLogin(){\n    yield takeLatest(LOG_IN_REQUEST, login)\n    \n}\n\nfunction signupAPI(signUpData){\n    return axios.post('/user', signUpData);\n}\n\nfunction* signup(action){\n    try{\n        yield call(signupAPI, action.data);\n        yield put({\n            type: SIGN_UP_SUCCESS,\n        })\n    }catch(err){\n        console.error(err)\n        yield put({\n            type: SIGN_UP_FAILURE,\n            error: err,\n        })\n    }\n   \n}\n\nfunction* watchSignup(){\n    yield takeLatest(SIGN_UP_REQUEST, signup)\n}\n\nfunction logoutAPI() {\n    return axios.post('/user/logout', {}, {\n        withCredentials: true,\n    })\n}\n\nfunction* logout(){\n    try{\n        yield call(logoutAPI);\n        yield put({\n            type: LOG_OUT_SUCCESS,\n        })\n    }catch(err){\n        console.error(err);\n        yield put({\n            type: LOG_OUT_FAILURE,\n            error: err,\n        })\n    }\n}\n\nfunction* watchLogout(){\n    yield takeLatest(LOG_OUT_REQUEST, logout)\n}\n\nfunction loadUserAPI(userId){\n    return axios.get(userId? `/user/${userId}`: `/user`, {\n        withCredentials: true,\n    })\n}\n\nfunction* loadUser(action){\n    try{\n        const result = yield call(loadUserAPI, action.data);\n        console.log('loadUser: ', result);\n        yield put({\n            type: LOAD_USER_SUCCESS,\n            data: result.data,\n            me: !action.data,\n        })\n    }catch(err){\n        console.error(err);\n        yield put({\n            type: LOAD_USER_FAILURE,\n            error: err,\n        })\n    }\n}\n\nfunction* watchLoadUser(){\n    yield takeLatest(LOAD_USER_REQUEST, loadUser)\n}\n\nfunction followUserAPI(postUserId){\n    return axios.post(`/user/${postUserId}/follow`, {}, {\n        withCredentials: true,\n    })\n}\n\nfunction* followUser(action){\n    try{\n        const result = yield call(followUserAPI, action.data);\n        console.log('followResult: ', result.data);\n        yield put({\n            type: FOLLOW_USER_SUCCESS,\n            data: result.data,\n        })\n    }catch(e){\n        console.error(e);\n        yield put({\n            type: FOLLOW_USER_FAILURE,\n            error: e,\n        })\n    }\n}\n\nfunction* watchFollowUser(){\n    yield takeLatest(FOLLOW_USER_REQUEST, followUser);\n}\n\nfunction unfollowUserAPI(postUserId){\n    return axios.delete(`/user/${postUserId}/follow`,{\n        withCredentials: true,\n    });\n}\n\nfunction* unfollowUser(action){\n    try{\n        const result = yield call(unfollowUserAPI, action.data);\n        console.log('unfollowResult: ', result);\n        yield put({\n            type: UNFOLLOW_USER_SUCCESS,\n            data: result.data,\n        })\n    }catch(e){\n        console.error(e),\n        yield put({\n            type: UNFOLLOW_USER_FAILURE,\n            error: e,\n        })\n    }\n}\n\nfunction* watchUnfollowUser(){\n    yield takeLatest(UNFOLLOW_USER_REQUEST, unfollowUser);\n}\n\nfunction loadFollowersAPI(userId, offset=0, limit=3){\n    return axios.get(`/user/${userId || 0}/followers?offset=${offset}&limit=${limit}`, {\n        withCredentials: true,\n    });\n}\n\nfunction* loadFollowers(action){\n    try{\n        const result = yield call(loadFollowersAPI, action.data, action.offset);\n        yield put({\n            type: LOAD_FOLLOWERS_SUCCESS,\n            data: result.data,\n        })\n    }catch(e){\n        console.error(e);\n        yield put({\n            type: LOAD_FOLLOWERS_FAILURE,\n            error: e,\n        })\n    }\n}\n\nfunction* watchLoadFollowers(){\n    yield takeLatest(LOAD_FOLLOWERS_REQUEST, loadFollowers);\n}\n\nfunction loadFollowingsAPI(userId, offset=0, limit=3){\n    return axios.get(`/user/${userId || 0}/followings?offset=${offset}&limit=${limit}`, {\n        withCredentials: true,\n    });\n}\n\nfunction* loadFollowings(action){\n    try{\n        const result = yield call(loadFollowingsAPI, action.data, action.offset);\n        yield put({\n            type: LOAD_FOLLOWINGS_SUCCESS,\n            data: result.data,\n        })\n    }catch(e){\n        console.error(e),\n        yield put({\n            type: LOAD_FOLLOWINGS_FAILURE,\n            error: e,\n        })\n    }\n}\n\nfunction* watchLoadFollowings(){\n    yield takeLatest(LOAD_FOLLOWINGS_REQUEST, loadFollowings);\n}\n\nfunction removeFollowerAPI(userId){\n    return axios.delete(`/user/${userId}/follower`, {\n        withCredentials: true,\n    });\n}\n\nfunction* removeFollower(action){\n    try{\n        const result = yield call(removeFollowerAPI, action.data);\n        yield put({\n            type: REMOVE_FOLLOWER_SUCCESS,\n            data: result.data,\n        })\n    }catch(e){\n        console.error(e),\n        yield put({\n            type: REMOVE_FOLLOWER_FAILURE,\n            error: e,\n        })\n    }\n}\n\nfunction* watchRemoveFollower(){\n    yield takeLatest(REMOVE_FOLLOWER_REQUEST, removeFollower);\n}\n\nfunction editNicknameAPI(nickname){\n    return axios.patch(`/user/nickname`, {nickname}, {\n        withCredentials: true,\n    })\n}\n\nfunction* editNickname(action){\n    try{\n        const result = yield call(editNicknameAPI, action.data);\n        yield put({\n            type: EDIT_NICKNAME_SUCCESS,\n            data: result.data,\n        })\n    }catch(e){\n        console.error(e);\n        yield put({\n            type: EDIT_NICKNAME_FAILURE,\n            error: e,\n        })\n    }\n}\n\nfunction* watchEditNickname(){\n    yield takeLatest(EDIT_NICKNAME_REQUEST, editNickname);\n}\n\nexport default function* userSaga() {\n    yield all([\n        fork(watchLogin),\n        fork(watchLogout),\n        fork(watchSignup),\n        fork(watchLoadUser),\n        fork(watchFollowUser),\n        fork(watchUnfollowUser),\n        fork(watchLoadFollowers),\n        fork(watchLoadFollowings),\n        fork(watchRemoveFollower),\n        fork(watchEditNickname),\n    ])\n}"]},"metadata":{},"sourceType":"module"}