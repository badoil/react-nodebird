{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nvar __jsx = React.createElement;\nimport React, { useCallback } from 'react';\nimport NicknameEditForm from '../components/nicknameEditForm';\nimport { useDispatch, useSelector } from 'react-redux';\nimport PostCard from '../components/postCard';\nimport ProfileFollowList from '../components/profileFollowList';\nimport { LOAD_FOLLOWINGS_REQUEST, LOAD_FOLLOWERS_REQUEST, UNFOLLOW_USER_REQUEST, REMOVE_FOLLOWER_REQUEST } from '../reducers/user';\nimport { LOAD_USER_POSTS_REQUEST } from '../reducers/post';\n\nvar Profile = function Profile() {\n  var _useSelector = useSelector(function (state) {\n    return state.user;\n  }),\n      followingList = _useSelector.followingList,\n      followerList = _useSelector.followerList,\n      hasMoreFollowings = _useSelector.hasMoreFollowings,\n      hasMoreFollowers = _useSelector.hasMoreFollowers;\n\n  var _useSelector2 = useSelector(function (state) {\n    return state.post;\n  }),\n      mainPosts = _useSelector2.mainPosts;\n\n  var dispatch = useDispatch();\n  var onUnfollow = useCallback(function (userId) {\n    return function () {\n      dispatch({\n        type: UNFOLLOW_USER_REQUEST,\n        data: userId\n      });\n    };\n  }, []);\n  var onRemoveFollower = useCallback(function (userId) {\n    return function () {\n      dispatch({\n        type: REMOVE_FOLLOWER_REQUEST,\n        data: userId\n      });\n    };\n  }, []);\n  var onLoadMoreFollowings = useCallback(function () {\n    dispatch({\n      type: LOAD_FOLLOWINGS_REQUEST,\n      offset: followingList.length\n    });\n  }, [followingList.length]);\n  var onLoadMoreFollowers = useCallback(function () {\n    dispatch({\n      type: LOAD_FOLLOWERS_REQUEST,\n      offset: followerList.length\n    });\n  }, [followerList.length]);\n  return __jsx(\"div\", null, __jsx(NicknameEditForm, null), __jsx(ProfileFollowList, {\n    header: \"following list\",\n    hasMoreFollow: hasMoreFollowings,\n    onClickMore: onLoadMoreFollowings,\n    dataSource: followingList,\n    onClickRemove: onUnfollow\n  }), __jsx(ProfileFollowList, {\n    header: \"follower list\",\n    hasMoreFollow: hasMoreFollowers,\n    onClickMore: onLoadMoreFollowers,\n    dataSource: followerList,\n    onClickRemove: onRemoveFollower\n  }), __jsx(\"div\", null, mainPosts.map(function (v) {\n    return __jsx(PostCard, {\n      post: v,\n      key: v.id\n    });\n  })));\n};\n\nProfile.getInitialProps = function _callee(context) {\n  var state;\n  return _regeneratorRuntime.async(function _callee$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          state = context.store.getState();\n          context.store.dispatch({\n            type: LOAD_FOLLOWINGS_REQUEST,\n            data: state.user.me && state.user.me.id\n          });\n          context.store.dispatch({\n            type: LOAD_FOLLOWERS_REQUEST,\n            data: state.user.me && state.user.me.id\n          });\n          context.store.dispatch({\n            type: LOAD_USER_POSTS_REQUEST,\n            data: state.user.me && state.user.me.id\n          });\n\n        case 4:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, null, null, null, Promise);\n};\n\nexport default Profile;","map":{"version":3,"sources":["/Users/oil/Desktop/zerocho-react/nodebird/front/pages/profile.js"],"names":["React","useCallback","NicknameEditForm","useDispatch","useSelector","PostCard","ProfileFollowList","LOAD_FOLLOWINGS_REQUEST","LOAD_FOLLOWERS_REQUEST","UNFOLLOW_USER_REQUEST","REMOVE_FOLLOWER_REQUEST","LOAD_USER_POSTS_REQUEST","Profile","state","user","followingList","followerList","hasMoreFollowings","hasMoreFollowers","post","mainPosts","dispatch","onUnfollow","userId","type","data","onRemoveFollower","onLoadMoreFollowings","offset","length","onLoadMoreFollowers","map","v","id","getInitialProps","context","store","getState","me"],"mappings":"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","sourcesContent":["import React, { useCallback } from 'react';\n\nimport NicknameEditForm from '../components/nicknameEditForm';\nimport { useDispatch, useSelector } from 'react-redux';\n\nimport PostCard from '../components/postCard';\nimport ProfileFollowList from '../components/profileFollowList';\nimport { LOAD_FOLLOWINGS_REQUEST, LOAD_FOLLOWERS_REQUEST,\n        UNFOLLOW_USER_REQUEST, REMOVE_FOLLOWER_REQUEST } from '../reducers/user';\nimport { LOAD_USER_POSTS_REQUEST } from '../reducers/post';\n\n\nconst Profile = () => {\n    const { followingList, followerList, hasMoreFollowings, hasMoreFollowers } = useSelector(state => state.user);\n    const { mainPosts } = useSelector(state => state.post);\n    const dispatch = useDispatch();\n\n    const onUnfollow = useCallback(userId => () =>{\n        dispatch({\n            type: UNFOLLOW_USER_REQUEST,\n            data: userId,\n        })\n    }, [])\n\n    const onRemoveFollower = useCallback(userId => () => {\n        dispatch({\n            type: REMOVE_FOLLOWER_REQUEST, \n            data: userId,\n        })\n     }, [])\n\n    const onLoadMoreFollowings = useCallback(() => {\n        dispatch({\n            type: LOAD_FOLLOWINGS_REQUEST,\n            offset: followingList.length,\n        })\n    } ,[followingList.length]);\n\n    const onLoadMoreFollowers = useCallback(() => {\n        dispatch({\n            type: LOAD_FOLLOWERS_REQUEST,\n            offset: followerList.length,\n        })\n    }, [followerList.length]);\n\n    return(\n        <div>\n            <NicknameEditForm />\n            <ProfileFollowList \n            header='following list' \n            hasMoreFollow={hasMoreFollowings}\n            onClickMore={onLoadMoreFollowings}\n            dataSource={followingList}\n            onClickRemove={onUnfollow}\n            /> \n            <ProfileFollowList\n            header='follower list' \n            hasMoreFollow={hasMoreFollowers}\n            onClickMore={onLoadMoreFollowers}\n            dataSource={followerList}\n            onClickRemove={onRemoveFollower}\n            />\n            <div>\n            {\n                mainPosts.map((v) => (\n                    <PostCard post={v} key={v.id} />\n                ))\n            }\n            </div>\n        </div>\n    )\n}\n\nProfile.getInitialProps = async (context) => {\n    const state = context.store.getState();\n    context.store.dispatch({\n        type: LOAD_FOLLOWINGS_REQUEST,\n        data: state.user.me && state.user.me.id,\n    })\n    context.store.dispatch({\n        type: LOAD_FOLLOWERS_REQUEST,\n        data: state.user.me && state.user.me.id,\n    })\n    context.store.dispatch({\n        type: LOAD_USER_POSTS_REQUEST,\n        data: state.user.me && state.user.me.id,\n    })\n}\n\nexport default Profile;"]},"metadata":{},"sourceType":"module"}