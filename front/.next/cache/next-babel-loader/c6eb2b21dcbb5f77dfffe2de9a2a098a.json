{"ast":null,"code":"var __jsx = React.createElement;\nimport React, { useCallback } from 'react';\nimport NicknameEditForm from '../components/nicknameEditForm';\nimport { useDispatch, useSelector } from 'react-redux';\nimport PostCard from '../components/postCard';\nimport ProfileFollowList from '../components/profileFollowList';\nimport { LOAD_FOLLOWINGS_REQUEST, LOAD_FOLLOWERS_REQUEST, UNFOLLOW_USER_REQUEST, REMOVE_FOLLOWER_REQUEST } from '../reducers/user';\nimport { LOAD_USER_POSTS_REQUEST } from '../reducers/post';\n\nconst Profile = () => {\n  const {\n    followingList,\n    followerList,\n    hasMoreFollowings,\n    hasMoreFollowers\n  } = useSelector(state => state.user);\n  const {\n    mainPosts\n  } = useSelector(state => state.post);\n  const dispatch = useDispatch();\n  const onUnfollow = useCallback(userId => () => {\n    dispatch({\n      type: UNFOLLOW_USER_REQUEST,\n      data: userId\n    });\n  }, []);\n  const onRemoveFollower = useCallback(userId => () => {\n    dispatch({\n      type: REMOVE_FOLLOWER_REQUEST,\n      data: userId\n    });\n  }, []);\n  const onLoadMoreFollowings = useCallback(() => {\n    dispatch({\n      type: LOAD_FOLLOWINGS_REQUEST,\n      offset: followingList.length\n    });\n  }, [followingList.length]);\n  const onLoadMoreFollowers = useCallback(() => {\n    dispatch({\n      type: LOAD_FOLLOWERS_REQUEST,\n      offset: followerList.length\n    });\n  }, [followerList.length]);\n  return __jsx(\"div\", null, __jsx(NicknameEditForm, null), __jsx(ProfileFollowList, {\n    header: \"following list\",\n    hasMoreFollow: hasMoreFollowings,\n    onClickMore: onLoadMoreFollowings,\n    dataSource: followingList,\n    onClickRemove: onUnfollow\n  }), __jsx(ProfileFollowList, {\n    header: \"follower list\",\n    hasMoreFollow: hasMoreFollowers,\n    onClickMore: onLoadMoreFollowers,\n    dataSource: followerList,\n    onClickRemove: onRemoveFollower\n  }), __jsx(\"div\", null, mainPosts.map(v => __jsx(PostCard, {\n    post: v,\n    key: v.id\n  }))));\n};\n\nProfile.getInitialProps = async context => {\n  const state = context.store.getState();\n  context.store.dispatch({\n    type: LOAD_FOLLOWINGS_REQUEST,\n    data: state.user.me && state.user.me.id\n  });\n  context.store.dispatch({\n    type: LOAD_FOLLOWERS_REQUEST,\n    data: state.user.me && state.user.me.id\n  });\n  context.store.dispatch({\n    type: LOAD_USER_POSTS_REQUEST,\n    data: state.user.me && state.user.me.id\n  });\n};\n\nexport default Profile;","map":{"version":3,"sources":["/Users/oil/Desktop/zerocho-react/nodebird/front/pages/profile.js"],"names":["React","useCallback","NicknameEditForm","useDispatch","useSelector","PostCard","ProfileFollowList","LOAD_FOLLOWINGS_REQUEST","LOAD_FOLLOWERS_REQUEST","UNFOLLOW_USER_REQUEST","REMOVE_FOLLOWER_REQUEST","LOAD_USER_POSTS_REQUEST","Profile","followingList","followerList","hasMoreFollowings","hasMoreFollowers","state","user","mainPosts","post","dispatch","onUnfollow","userId","type","data","onRemoveFollower","onLoadMoreFollowings","offset","length","onLoadMoreFollowers","map","v","id","getInitialProps","context","store","getState","me"],"mappings":"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","sourcesContent":["import React, { useCallback } from 'react';\n\nimport NicknameEditForm from '../components/nicknameEditForm';\nimport { useDispatch, useSelector } from 'react-redux';\n\nimport PostCard from '../components/postCard';\nimport ProfileFollowList from '../components/profileFollowList';\nimport { LOAD_FOLLOWINGS_REQUEST, LOAD_FOLLOWERS_REQUEST,\n        UNFOLLOW_USER_REQUEST, REMOVE_FOLLOWER_REQUEST } from '../reducers/user';\nimport { LOAD_USER_POSTS_REQUEST } from '../reducers/post';\n\n\nconst Profile = () => {\n    const { followingList, followerList, hasMoreFollowings, hasMoreFollowers } = useSelector(state => state.user);\n    const { mainPosts } = useSelector(state => state.post);\n    const dispatch = useDispatch();\n\n    const onUnfollow = useCallback(userId => () =>{\n        dispatch({\n            type: UNFOLLOW_USER_REQUEST,\n            data: userId,\n        })\n    }, [])\n\n    const onRemoveFollower = useCallback(userId => () => {\n        dispatch({\n            type: REMOVE_FOLLOWER_REQUEST, \n            data: userId,\n        })\n     }, [])\n\n    const onLoadMoreFollowings = useCallback(() => {\n        dispatch({\n            type: LOAD_FOLLOWINGS_REQUEST,\n            offset: followingList.length,\n        })\n    } ,[followingList.length]);\n\n    const onLoadMoreFollowers = useCallback(() => {\n        dispatch({\n            type: LOAD_FOLLOWERS_REQUEST,\n            offset: followerList.length,\n        })\n    }, [followerList.length]);\n\n    return(\n        <div>\n            <NicknameEditForm />\n            <ProfileFollowList \n            header='following list' \n            hasMoreFollow={hasMoreFollowings}\n            onClickMore={onLoadMoreFollowings}\n            dataSource={followingList}\n            onClickRemove={onUnfollow}\n            /> \n            <ProfileFollowList\n            header='follower list' \n            hasMoreFollow={hasMoreFollowers}\n            onClickMore={onLoadMoreFollowers}\n            dataSource={followerList}\n            onClickRemove={onRemoveFollower}\n            />\n            <div>\n            {\n                mainPosts.map((v) => (\n                    <PostCard post={v} key={v.id} />\n                ))\n            }\n            </div>\n        </div>\n    )\n}\n\nProfile.getInitialProps = async (context) => {\n    const state = context.store.getState();\n    context.store.dispatch({\n        type: LOAD_FOLLOWINGS_REQUEST,\n        data: state.user.me && state.user.me.id,\n    })\n    context.store.dispatch({\n        type: LOAD_FOLLOWERS_REQUEST,\n        data: state.user.me && state.user.me.id,\n    })\n    context.store.dispatch({\n        type: LOAD_USER_POSTS_REQUEST,\n        data: state.user.me && state.user.me.id,\n    })\n}\n\nexport default Profile;"]},"metadata":{},"sourceType":"module"}