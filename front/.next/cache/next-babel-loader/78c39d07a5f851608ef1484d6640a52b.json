{"ast":null,"code":"var __jsx = React.createElement;\nimport React, { useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { LOAD_HASHTAG_POSTS_REQUEST } from '../reducers/post';\nimport PostCard from '../components/postCard';\n\nconst Hashtag = ({\n  tag\n}) => {\n  console.log('tag:', tag);\n  const dispatch = useDispatch();\n  const {\n    mainPosts,\n    hasMore\n  } = useSelector(state => state.post);\n\n  const onScroll = () => {\n    if (window.scrollY + document.documentElement.clientHeight > document.documentElement.scrollHeight - 300) {\n      if (hasMore) {\n        dispatch({\n          type: LOAD_HASHTAG_POSTS_REQUEST,\n          lastId: mainPosts[mainPosts.length - 1].id,\n          data: tag\n        });\n      }\n    }\n  };\n\n  useEffect(() => {\n    window.addEventListener('scroll', onScroll);\n    return () => {\n      window.removeEventListener('scroll', onscroll);\n    };\n  }, []);\n  return __jsx(\"div\", null, mainPosts.map(c => __jsx(PostCard, {\n    post: c,\n    key: c.id\n  })));\n};\n\nHashtag.getInitialProps = async context => {\n  const tag = context.query.tag;\n  console.log('context.query.tag: ', tag);\n  context.store.dispatch({\n    type: LOAD_HASHTAG_POSTS_REQUEST,\n    data: tag\n  });\n  return {\n    tag\n  };\n};\n\nexport default Hashtag;","map":null,"metadata":{},"sourceType":"module"}